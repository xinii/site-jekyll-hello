---
layout: post
title: "Change shell from zsh to fish"
subtitle:  "将 shell 从 zsh 转移到 fish"
date:   2019-05-03 02:10:00 +0900
background: '/img/posts/fish.png'
---

今天基本把所有环境转移到了 fish，算是 shell 的整理工作告一段路，对整个过程稍作总结。

## fish 的安装与默认 shell 的切换
{:.section-heading}

* MacOS 环境：

```
brew install fish
```

* Ubuntu / Linux Mint 环境：

```
apt install fish
```

* OpenSUSE 环境：

```
sudo zypper install fish
```
（若是运行在 Windows 下的 OpenSUSE 环境，
默认应该需要 root 权限因此加 sudo）

安装好后通过以下语句查看当前系统下安装的 shell：

```
cat /etc/shells
```

例如 fish 如果为 `/usr/bin/fish`，
那么执行下面的语句切换 fish 到默认的 shell：

```
chsh -s /usr/bin/fish
```
（如果权限不足在前面补充 sudo）

现在重新打开一个终端会话会发现默认 shell 已经切换到 fish 了。
如果打开 fish shell 马上报很多关于 hostname 的错，
需要使用当前 Linux 发行版的包管理器安装 hostname，
例如在 OpenSUSE 环境下出现类似错误时运行：

```
sudo zypper install hostname
```

即环境下默认缺少 hostname 时，安装即可。

## fish 的配置
{:.section-heading}

我写好的配置上传在了 Github，有需要的可以使用：
[点击查看我的配置](https://github.com/xinii/xinconfig/tree/master/profile/fish)

## 在 fish 下使用 python 时的常见问题
{:.section-heading}

目前我遇到的比较需要注意的问题主要有以下两点：

- 关于 tmux

tmux 在后台存在 session 时，即使更新 PYTHONPATH 环境变量也不生效，
此时需要关闭 tmux 所有进程，更改才会生效。

（该问题除 fish 以外应该也会遇到，需要注意）

- 关于 PYTHONPATH

fish 定义环境变量的方式为 `set <变量名> <变量值1> <变量值2>` 的方式，
这种方式有很大的优越性并且十分方便，
但是对于 PYTHONPATH，最好使用 `set PYTHONPATH <变量值1>:<变量值2>` 的方式，
经测试，我在 MacOS 下两种方式均正常使用，
而在 Jetson Nano 搭载的 Ubuntu 下只有第二种方式适用。

具体原因还未明确，有可能是操作系统不同的原因，
也有可能是 python 版本不同的原因（版本号相同，但处理器架构不同，故编译方式存在差异）。
